!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("FourCorners",[],t):"object"==typeof exports?exports.FourCorners=t():e.FourCorners=t()}(window,function(){return function(r){var n={};function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}return o.m=r,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,r){e.exports=r(2)},function(e,t,r){},function(e,t,r){"use strict";r.r(t);r(1);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,c=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw c}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var n=function(e){var t=document.querySelector(e.opts.selector);if(t)return t},o=function(e){var t=e.data.img,r=document.createElement("img");return r.classList.add("fc_photo"),r.src=t,e.elems.embed.appendChild(r),r},c=function(n){var o={},c=n.elems.embed;return n.corners.forEach(function(a,e){var t=document.createElement("div");t.classList.add("fc_panel"),t.dataset.id=a;var r=n.data[a],i=document.createElement("div");i.classList.add("fc_inner"),Object.entries(r).forEach(function(e){var t=s(e,2),r=t[0],n=t[1],o=document.createElement("div");o.className="fc_row";var c=document.createElement("div");c.className="fc_label",c.innerHTML=r,o.appendChild(c),"media"==a?o.append(d(n)):"links"==a?o.append(f(n)):(n=h(n),o.innerHTML+=n),i.appendChild(o)}),t.appendChild(i),c.appendChild(t),o[a]=t}),o},d=function(e){var o=document.createElement("div");return o.className="fc_grid",e.forEach(function(e,t){if("image"==e.type){var r=document.createElement("div");r.className="fc_image";var n=document.createElement("img");n.src=e.url,r.appendChild(n),o.appendChild(r)}}),o},f=function(e){},a=function(n){var o={},c=n.elems.embed;n.opts.cornerStroke,n.opts.cornerSize,n.opts.cornerMargin;return n.corners.forEach(function(e,t){var r=document.createElement("div");r.classList.add("fc_corner"),r.dataset.id=e,c.addEventListener("mouseenter",function(e){u(e,n)}),c.addEventListener("mouseleave",function(e){l(e,n)}),r.addEventListener("mouseenter",function(e){p(e,n)}),r.addEventListener("mouseleave",function(e){m(e,n)}),r.addEventListener("click",function(e){v(e,n)}),o[e]=r,c.appendChild(r)}),o},i=function(e){var t=e.elems.embed.dataset.fc;if(t)return t=t.replace(/(\')/g,'"'),delete e.elems.embed.dataset.fc,JSON.parse(t)},u=function(e,t){t.elems.embed,t.elems.corners,t.css,t.opts.posDur},l=function(e,t){t.elems.embed,t.elems.corners,t.css,t.opts.posDur},p=function(e,t){e.target.classList.add("fc_hover")},m=function(e,t){e.target.classList.remove("fc_hover")},v=function(e,t){var r=e.target,n=r.dataset.id,o=t.elems.panels[n];r.classList.toggle("fc_active"),o.classList.toggle("fc_active");var c='.fc_panel.fc_active:not([data-id="'+n+'"])',a=document.querySelector(c);a&&a.classList.remove("fc_active");var i='.fc_corner.fc_active:not([data-id="'+n+'"])',s=document.querySelector(i);s&&s.classList.remove("fc_active");document.querySelector(".fc_corner.fc_active")?t.elems.embed.classList.add("fc_active"):t.elems.embed.classList.remove("fc_active")},h=function(e){return e.replace(/(?:(?:https?|ftp):\/\/)?(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\x{00a1}\-\x{ffff}0-9]+-?)*[a-z\x{00a1}\-\x{ffff}0-9]+)(?:\.(?:[a-z\x{00a1}\-\x{ffff}0-9]+-?)*[a-z\x{00a1}\-\x{ffff}0-9]+)*(?:\.(?:[a-z\x{00a1}\-\x{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?/gi,function(e){return'<a href="'+(/^(?:(?:https?|ftp):\/\/)/i.test(e)?e:"http://"+e)+'" target="_blank">'+e+"</a>"})},b=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.elems={},this.opts=Object.assign({selector:".fc_embed",cornerStroke:"6px",cornerSize:"25px",cornerColor:"white",cornerActiveColor:"blue",cornerHoverColor:"red",posDur:.2,transDur:.1},t),this.opts.cornerMargin=parseInt(this.opts.cornerSize)/2+"px",this.corners=["backstory","copyright","media","links"],this.elems.embed=n(this),this.data=i(this),this.elems.photo=o(this),this.elems.panels=c(this),this.elems.corners=a(this)};t.default=b}])});