!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("FourCorners",[],t):"object"==typeof exports?exports.FourCorners=t():e.FourCorners=t()}(window,function(){return function(r){var n={};function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}return o.m=r,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,r){e.exports=r(2)},function(e,t,r){},function(e,t,r){"use strict";r.r(t);r(1);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,s=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,s=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw s}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function s(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.elems={},this.opts=t,this.corners=["context","links","authorship","backstory"],this.elems.embed=e,this.elems.embed.classList.add("fc-init"),this.data=m(this),this.elems.photo=l(this),this.elems.panels=u(this),this.elems.corners=d(this),this.elems.caption=f(this),a(this)}var e,t,r;return e=s,(t=[{key:"init",value:function(e){var n=this,o=(n.embeds=[],Object.assign({selector:".fc-embed:not(.fc-init)",noPanels:!1,noCorners:!1,cornerStroke:"6px",cornerSize:"25px",cornerColor:"white",cornerActiveColor:"blue",cornerHoverColor:"red",posDur:.2,transDur:.1},e));return Array.from(document.querySelectorAll(o.selector)).forEach(function(e,t){var r=new s(e,o);n.embeds.push(r)}),n.embeds}},{key:"openCorner",value:function(r){var n=this,e=this.corners,t=this.elems.embed,o=this.elems.corners[r],s=this.elems.panels[r];o&&s&&(t.dataset.active=r,t.classList.add("fc-active"),o.classList.add("fc-active"),s.classList.add("fc-active")),e.forEach(function(e,t){e!=r&&n.closeCorner(e)})}},{key:"closeCorner",value:function(e){var t=this.elems.embed;e||(e=t.dataset.active);var r=this.elems.corners[e],n=this.elems.panels[e];e==t.dataset.active&&(t.dataset.active="",t.classList.remove("fc-active")),r&&r.classList.remove("fc-active"),n&&n.classList.remove("fc-active")}}])&&n(e.prototype,t),r&&n(e,r),s}(),a=function(o){var e=o.elems.embed;e.addEventListener("mouseenter",function(e){v(e,o)}),e.addEventListener("mouseleave",function(e){p(e,o)}),window.addEventListener("resize",function(e){c(e,o)}),window.addEventListener("click",function(e){var t=g(e.target,o.elems.panels),r=g(e.target,o.elems.corners),n=g(e.target,Array.from(document.querySelectorAll("#creator")));t||r||n||o.closeCorner()}),c(null,o)},c=function(e,t){var r=t.elems.panels;r&&Object.keys(r).forEach(function(e,t){i(r[e])})},i=function(e){var t=e.querySelector(".fc-scroll");t&&(t.scrollHeight>t.clientHeight?e.classList.add("fc-overflow"):e.classList.remove("fc-overflow"))},l=function(e){var t=e.elems.embed,r=document.createElement("img");r.classList.add("fc-img");var n="",o=".fc-photo";if(t.querySelector(o))n=t.querySelector(o);else{(n=document.createElement("div")).classList.add("fc-photo");var s=new Image,a=e.data.img;s.onload=function(e){r.src=a,n.classList.add("fc-loaded")},s.onerror=function(e){console.log(e)},s.src=a,n.appendChild(r)}return t.appendChild(n),n},u=function(i){var l={},u=i.elems.embed;return i.corners.forEach(function(e,t){if(i.data){var r=i.data[e];if(!r||!Object.keys(r).length)return}var n,o='.fc-panel[data-slug="'+e+'"]';if(u.querySelector(o))n=u.querySelector(o);else{(n=document.createElement("div")).classList.add("fc-panel"),n.dataset.slug=e;var s=document.createElement("div");s.classList.add("fc-scroll");var a=document.createElement("div");a.classList.add("fc-inner");var c=document.createElement("div");c.classList.add("fc-panel-title"),a.appendChild(c),c.innerHTML=e,s.appendChild(a),n.appendChild(s),u.appendChild(n)}l[e]=n}),l},d=function(o){var s,a={},c=o.elems.embed;o.elems.photo;return o.corners.forEach(function(e,t){var r='.fc-corner[data-slug="'+e+'"]';if(!c.querySelector(r)){var n=document.createElement("div");n.dataset.slug=e,n.classList.add("fc-corner"),o.data&&((s=o.data[e])&&Object.keys(s).length||n.classList.add("fc-inactive")),n.addEventListener("mouseenter",function(e){h(e,o)}),n.addEventListener("mouseleave",function(e){b(e,o)}),n.addEventListener("click",function(e){y(e,o)}),a[e]=n,c.appendChild(n)}}),a},f=function(e){if(e.data){var t=e.data.authorship;if(t&&Object.keys(t).length){var r=e.elems.embed,n=document.createElement("div");n.classList.add("fc-caption");var o=[];t.credit&&o.push(t.credit),t.copyright&&o.push("&copy;");o.push('<a href="#">Four Corners</a>');var s=o.join(" ");n.innerHTML=s,r.parentNode.insertBefore(n,r.nextSibling)}}},m=function(e){var t=e.elems.embed.dataset.fc;if(t)return t=t,delete e.elems.embed.dataset.fc,JSON.parse(t)},v=function(e,t){t.elems.embed,t.elems.corners,t.css,t.opts.posDur},p=function(e,t){t.elems.embed,t.elems.corners,t.css,t.opts.posDur},h=function(e,t){e.target.classList.add("fc-hover")},b=function(e,t){e.target.classList.remove("fc-hover")},y=function(e,t){var r=e.target.dataset.slug,n=t.elems.embed.dataset.active;r&&(r==n?t.closeCorner(r):t.openCorner(r))},g=function(r,e){var n=!1;return Object.entries(e).forEach(function(e){var t=o(e,2);t[0];t[1].contains(r)&&(n=!0)}),n},L=s;t.default=L}])});